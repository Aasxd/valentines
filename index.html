<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>üíñ</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root{
            --hotpink: #ff4da6;
            --soft-pink: #ffd6e8;
            --accent: #ff9fcf;
            --glass: rgba(255,255,255,0.12);
        }

        html,body{
            height:100%;
            margin:0;
        }

        body {
            margin: 0;
            min-height: 100dvh; /* better for mobile browsers */
            background: radial-gradient(circle at top, var(--soft-pink), var(--accent));
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-font-smoothing:antialiased;
            -webkit-touch-callout:none;
            -webkit-user-select:none;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* gentle shimmer */
        body::after{
            content: '';
            position: fixed;
            inset: 0;
            background: linear-gradient(120deg, rgba(255,255,255,0.03), rgba(255,255,255,0.07), rgba(255,255,255,0.03));
            pointer-events: none;
            mix-blend-mode: soft-light;
            animation: shimmer 8s linear infinite;
            z-index: 0;
        }

        @keyframes shimmer{
            0%{transform: translateX(-20%)}
            50%{transform: translateX(20%)}
            100%{transform: translateX(-20%)}
        }

        /* Shared containers avoid notch */
        #startScreen, #yesScreen, #game {
            box-sizing: border-box;
            padding-left: max(16px, env(safe-area-inset-left));
            padding-right: max(16px, env(safe-area-inset-right));
        }

        /* Start Screen */
        #startScreen {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.70);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 999;
            cursor: pointer;
            gap: 18px;
            padding: 28px 20px;
            text-align: center;
        }

        #startScreen h1 {
            font-size: 2.2rem;
            margin:0;
            letter-spacing:0.6px;
        }

        #startScreen p {
            margin:0;
            font-size:1.15rem;
            color:#ffdce8;
            max-width:720px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.35);
        }

        /* Game Screen */
        #game {
            display: none;
            text-align: center;
            width:100%;
            max-width:920px;
            margin: 0 auto;
            z-index:1;
        }

        .page-header {
            font-size: 1.5rem;
            color: white;
            text-shadow: 0 0 10px rgba(255,105,180,0.7);
            margin: 10px auto 8px auto;
            max-width: 900px;
            padding: 0 12px;
            transition: opacity 300ms ease, transform 300ms ease;
            opacity: 1;
            z-index: 2;
        }

        /* GIFs */
        .gifs {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 16px 0 22px 0;
            flex-wrap: wrap;
            align-items: center;
            z-index:2;
        }

        .gifs h3 {
            display:none; /* the text lives in header now */
        }

        .gifs img {
            width: 160px;
            max-width: 44vw;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.25);
            border: 3px solid rgba(255,255,255,0.08);
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
        }

        /* Buttons */
        .buttons {
            position: relative;
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 22px;
            z-index:2;
        }

        button {
            padding: 14px 30px;
            font-size: 1.05rem;
            border-radius: 28px;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 8px 22px rgba(0,0,0,0.18);
            position: relative;
        }

        button:hover {
            transform: translateY(-3px) scale(1.03);
        }

        #yesBtn {
            background: linear-gradient(90deg,var(--hotpink), #ff7ab1);
            color: white;
            font-weight:600;
            padding: 16px 36px;
        }

        #noBtn {
            background: white;
            color: #222;
            position: absolute;
            padding: 12px 18px;
            left: 60%;
            top: 20%;
            transition: left 200ms ease, top 200ms ease, transform 160ms ease;
            border-radius: 22px;
            min-width: 84px;
        }

        #noBtn:active { transform: scale(0.98); }

        /* Yes Screen */
        #yesScreen {
            display: none;
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #ffb6d9, #ffc0cb);
            z-index: 5;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 28px;
            text-align: center;
        }

        #yesScreen h1 {
            font-size: 2.4rem;
            color: white;
            text-shadow: 0 0 25px hotpink;
            margin: 0 0 12px 0;
        }

        #yesScreen p {
            font-size:1.2rem;
            margin:0;
        }

        /* Floating Hearts and Peonies */
        .float {
            position: absolute;
            animation: floatUp linear forwards;
            pointer-events: none;
            will-change: transform, opacity;
            user-select:none;
            z-index: 6;
        }

        @keyframes floatUp {
            from {
                transform: translateY(100vh) scale(0.6);
                opacity: 1;
            }
            to {
                transform: translateY(-20vh) scale(1.4);
                opacity: 0;
            }
        }

        /* Confetti / flower pieces */
        .confetti-piece {
            position: fixed;
            width: 12px;
            height: 12px;
            pointer-events: none;
            transform-origin: center;
            border-radius: 3px;
            z-index: 7;
            opacity: 0.95;
            will-change: transform, opacity;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity:1 }
            100% { transform: translateY(110vh) rotate(720deg) translateX(120px); opacity:0 }
        }

        /* small responsive adjustments */
        @media (max-width: 520px) {
            .gifs img { width: 110px; max-width: 46vw; }
            .page-header { font-size: 1.05rem; padding: 0 6px; }
            #startScreen h1 { font-size: 1.6rem; }
            #startScreen p { font-size: 0.98rem; }
            #noBtn { left: 62%; top: 10%; min-width:68px; padding:10px 12px;}
            .buttons { height: 120px; gap: 12px; }
        }

        /* pop animation for buttons reveal */
        @keyframes pop {
            0% { transform: scale(0.9); opacity: 0; }
            60% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>

<body>

<!-- Start Screen -->
<div id="startScreen" role="button" aria-label="Tap to start">
    <h1>Tap to Start üíñüéÆ</h1>
    <p id="introMessage">Hey Sadie, I just wanted to say that I‚Äôve missed you so much üíñ</p>
</div>

<!-- Music -->
<audio id="music" loop>
    <source src="music/I Adore You.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<!-- Game Screen -->
<div id="game" aria-live="polite">
    <div id="pageHeader" class="page-header" aria-live="polite"></div>

    <!-- Page 1: "I Miss You" -->
    <div class="gifs" id="page1">
        <h3>I wish we could‚Äôve been next to each other right now.</h3>
        <img src="images/bubu1.gif" alt="missing you">
    </div>

    <!-- Page 2: "Can't Wait to Come Back" -->
    <div class="gifs" id="page2">
        <h3>I can't wait to come back to Dubai so we can go on walks and beaches.</h3>
        <img src="images/walking.gif" alt="walking">
        <img src="images/beach.gif" alt="beach">
    </div>

    <!-- Page 3: "Late Night Drives" -->
    <div class="gifs" id="page3">
        <h3>And oh, let‚Äôs not forget the late-night drives!</h3>
        <img src="images/drives.gif" alt="drives">
    </div>

    <!-- Page 4: "Outings and Food" -->
    <div class="gifs" id="page4">
        <h3>And the outings and foooood!</h3>
        <img src="images/outings.gif" alt="outings">
    </div>

    <!-- Page 5: "Ice Cream Dates" -->
    <div class="gifs" id="page5">
        <h3>And the ice cream dates perhaps üç¶</h3>
        <img src="images/ic.gif" alt="ice cream">
    </div>

    <!-- Page 6: "Chai and Luqimaat" -->
    <div class="gifs" id="page6">
        <h3>Chai and Luqimaat sounds yummy right now, def not as yummy as you tho üòã</h3>
        <img src="images/tt.gif" alt="chai and luqimaat">
    </div>

    <!-- Page 7: "Fun Times" -->
    <div class="gifs" id="page7">
        <h3>This could go on forever because I have so much I want to do with you.</h3>
        <img src="images/1.gif" alt="fun1">
        <img src="images/2.gif" alt="fun2">
        <img src="images/3.gif" alt="fun3">
    </div>

    <!-- Page 8: "Everyday Together" -->
    <div class="gifs" id="page8">
        <h3>And honestly, I‚Äôd want to start and end my day eating you ü´®üëÖ</h3>
        <img src="images/everyday.gif" alt="everyday">
    </div>

    <!-- Page 9: "I Just Had Something to Ask" -->
    <div class="gifs" id="page9">
        <h3>I just had something to ask you‚Ä¶</h3>
        <img src="images/question.gif" alt="question">
    </div>

    <!-- Final Question: Will You Be My Valentine -->
    <div class="buttons">
        <button id="yesBtn">YES üíñüòöüå∏</button>
        <button id="noBtn">NO üôÑ</button>
    </div>
</div>

<!-- Yes Screen -->
<div id="yesScreen">
    <h1>üíñ I love you my pretty baby üíñ</h1>
    <p>üíñüå∏üíñüå∏üíñüå∏üíñüå∏üíñ</p>
</div>

<script>
const startScreen = document.getElementById("startScreen");
const game = document.getElementById("game");
const yesScreen = document.getElementById("yesScreen");
const music = document.getElementById("music");
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const buttonsDiv = document.querySelector('.buttons');
const pageHeader = document.getElementById('pageHeader');

const pages = [
    document.getElementById("page1"),
    document.getElementById("page2"),
    document.getElementById("page3"),
    document.getElementById("page4"),
    document.getElementById("page5"),
    document.getElementById("page6"),
    document.getElementById("page7"),
    document.getElementById("page8"),
    document.getElementById("page9")
];

// hide buttons initially
buttonsDiv.style.display = 'none';

// helper to show exactly one page (hide others)
function showPage(index) {
    pages.forEach((p, i) => {
        p.style.display = (i === index) ? 'flex' : 'none';
    });

    // update header text from the page's h3
    const h3 = pages[index].querySelector('h3');
    if (h3) {
        // small fade update
        pageHeader.style.opacity = 0;
        setTimeout(() => {
            pageHeader.textContent = h3.textContent;
            pageHeader.style.transform = 'translateY(-6px)';
            pageHeader.style.opacity = 1;
            setTimeout(() => pageHeader.style.transform = '', 250);
        }, 160);
    }
}

// play the pages in sequence
function playPagesSequence() {
    let idx = 0;
    const intervalMs = 6000; // 6 seconds per page
    showPage(0);

    const timer = setInterval(() => {
        idx++;
        if (idx < pages.length) {
            showPage(idx);
        } else {
            // finished sequence: stop interval, show final page and reveal buttons
            clearInterval(timer);
            showPage(pages.length - 1);
            buttonsDiv.style.display = 'block';
            buttonsDiv.style.animation = 'pop 220ms ease';
            setTimeout(() => buttonsDiv.style.animation = '', 250);
        }
    }, intervalMs);
}

// move the NO button to a random position within the buttons container
function moveNoButton() {
    const containerRect = buttonsDiv.getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();

    // compute available area inside container (give a little padding)
    const padding = 8;
    const maxLeft = Math.max(0, containerRect.width - btnRect.width - padding * 2);
    const maxTop = Math.max(0, containerRect.height - btnRect.height - padding * 2);

    const left = padding + Math.random() * maxLeft;
    const top = padding + Math.random() * maxTop;

    noBtn.style.left = `${left}px`;
    noBtn.style.top = `${top}px`;
}

// create floating emojis when YES is clicked
function createFloats() {
    const emojis = ['üíñ','üå∏','üå∫','üíê'];
    const count = 36;
    for (let i = 0; i < count; i++) {
        const el = document.createElement('div');
        el.className = 'float';
        el.textContent = emojis[Math.floor(Math.random() * emojis.length)];

        // random size
        const size = 18 + Math.random() * 48;
        el.style.fontSize = `${size}px`;

        // random horizontal start
        el.style.left = `${Math.random() * 100}vw`;

        // start slightly below the viewport for nicer animation
        el.style.bottom = `-${10 + Math.random() * 20}vh`;

        // random animation duration and delay
        el.style.animationDuration = `${6 + Math.random() * 7}s`;
        el.style.animationDelay = `${Math.random() * 1.5}s`;

        // random opacity
        el.style.opacity = `${0.6 + Math.random() * 0.4}`;

        document.body.appendChild(el);

        // remove after animation finishes (duration + delay)
        const total = (parseFloat(el.style.animationDuration) + parseFloat(el.style.animationDelay)) * 1000 + 500;
        setTimeout(() => {
            if (el && el.parentNode) el.parentNode.removeChild(el);
        }, total);
    }
}

// create flower-like confetti pieces that fall
function createConfetti() {
    const colors = ['#FF6B9A', '#FFB6D9', '#FFD3E8', '#FFC0CB', '#FF7AB1'];
    const count = 60;
    for (let i = 0; i < count; i++) {
        const el = document.createElement('div');
        el.className = 'confetti-piece';
        const size = 8 + Math.random() * 14;
        el.style.width = `${size}px`;
        el.style.height = `${size}px`;
        el.style.left = `${Math.random() * 100}vw`;
        el.style.top = `${-10 - Math.random() * 20}vh`;
        el.style.background = colors[Math.floor(Math.random() * colors.length)];
        el.style.borderRadius = `${Math.random() * 6}px`;
        const dur = 2400 + Math.random() * 2600;
        el.style.animation = `confettiFall ${dur}ms cubic-bezier(.17,.67,.3,1) forwards`;
        el.style.transform = `translateX(${(Math.random()-0.5)*40}px) rotate(${Math.random()*360}deg)`;
        document.body.appendChild(el);

        setTimeout(() => {
            if (el && el.parentNode) el.parentNode.removeChild(el);
        }, dur + 600);
    }
}

/* Tap to Start */
startScreen.addEventListener("click", () => {
    // Hide start and show game
    startScreen.style.display = 'none';
    game.style.display = 'block';

    // update header to first page text immediately so user sees message
    const firstH3 = pages[0].querySelector('h3');
    pageHeader.textContent = firstH3 ? firstH3.textContent : '';

    // set sensible volume and try to play audio (we have a user gesture)
    try {
        music.volume = 0.30;
        music.play();
    } catch (e) {
        // ignore
    }

    playPagesSequence();
});

// NO button evasive behavior on hover/click/touch
noBtn.addEventListener('mouseenter', moveNoButton);
noBtn.addEventListener('click', (e) => {
    moveNoButton();
    e.preventDefault();
});
noBtn.addEventListener('touchstart', (e) => {
    // respond immediately on touch devices
    moveNoButton();
    e.preventDefault();
}, {passive:false});

// update NO position within container when window resizes to keep it inside
window.addEventListener('resize', () => {
    // if buttons are visible, ensure NO is inside
    if (buttonsDiv.style.display !== 'none') {
        const containerRect = buttonsDiv.getBoundingClientRect();
        const btnRect = noBtn.getBoundingClientRect();
        // clamp left/top
        const left = Math.min(Math.max(0, parseFloat(noBtn.style.left || 0)), Math.max(0, containerRect.width - btnRect.width));
        const top = Math.min(Math.max(0, parseFloat(noBtn.style.top || 0)), Math.max(0, containerRect.height - btnRect.height));
        noBtn.style.left = isNaN(left) ? '10px' : `${left}px`;
        noBtn.style.top = isNaN(top) ? '10px' : `${top}px`;
    }
});

// YES button behavior
yesBtn.addEventListener('click', () => {
    // show the yes screen but keep the music playing
    yesScreen.style.display = 'flex';
    game.style.display = 'none';

    // gentle music boost for the celebration (if allowed)
    try { if (music.volume < 0.6) music.volume = Math.min(0.55, music.volume + 0.15); } catch (e) {}

    createFloats();
    createConfetti();
});

// Initially hide all pages (so they don't flash before script runs)
pages.forEach(p => p.style.display = 'none');
</script>
</body>
</html>
